<!DOCTYPE HTML>
<html lang='en'>
<head>
    <meta charset='utf-8' />
    <meta content='IE=Edge,chrome=1' http-equiv='X-UA-Compatible' />
    <meta http-equiv="X-UA-Compatible" content="IE=10">
    <title>ComplianceTracker Demo</title>
    <meta content='noindex' name='robots' />

    @Styles.Render("~/Content/css/UserDashboardcss")
    @Scripts.Render("~/bundles/dashboard")

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="~/Scripts/new.js" type="text/javascript"></script>

    <link rel="stylesheet" href="~/Content/css/UserDashBoard/bootstrap.min.css" />
    <link rel="stylesheet" href="~/Content/css/UserDashBoard/bootstrap-datetimepicker.min.css" />
    <script src="~/Scripts/bootstrap.min.js"></script>
    <script src="~/Scripts/bootstrap-datetimepicker.min.js"></script>
    <link href="~/Content/css/UserDashboard/style.css" rel="stylesheet" />
    <link href="~/Content/css/UserDashboard/common.css" rel="stylesheet" />
    <link href="~/Content/css/UserDashboard/megamenu.css" rel="stylesheet" />

</head>

<body>

    <div id="fullcontent">

        <div id='header'>
            <div class='navbar navbar-static-top'>
                <div class='navbar-inner'>
                    <div class='container'>
                        <a class='btn btn-navbar' data-target='.nav-collapse' data-toggle='collapse'>
                            <span class='icon-bar'></span>
                            <span class='icon-bar'></span>
                            <span class='icon-bar'></span>
                        </a>
                        <div class='brand'>
                            <a class='brand'>Super Admin Compliance Tracker</a>
                        </div>
                        <div class='container nav-collapse'>
                            <ul class='nav pull-right'>
                                <li class='active'>
                                    @Html.ActionLink("Dashboard", "GetCompanies", "SuperAdminDashBoard", new { Id = "All" }, null)
                                </li>
                                @*<li class='active'><a href="/dashboard.html">Dashboard</a></li>*@
                                <li>
                                    <a href='#'>
                                        <i class='iconic-aperture'></i>
                                        Settings
                                    </a>
                                </li>
                                <li>
                                    @Html.ActionLink("Sign Out", "LogOut", "Login")

                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="body">
            <div id='content'>
                <div class='container'>
                    <div class='content-box'>
                        <br />
                        <div class='row'>
                            <div class='span7'>
                                <img src="~/Content/images/logo.png" width="150" />
                            </div>

                        </div>
                        <br />
                        <div class='tabbable' style="margin-left: -42px;">
                            <div class="r-menu-base">
                                <ul>
                                    <li>@Html.ActionLink("Client List", "GetCompanies", "SuperAdminDashBoard")</li>
                                    <li id="reportingli"><a id="reporting">Reporting</a></li>
                                    <li id="administrationli"><a id="administration">Administration</a></li>
                                    @*<li><a href="#" id="my-message">My Messages</a></li>*@
                                    @* <li id="messagedocli" class="active2">@Html.ActionLink("My Communication", "CompanyDashBoard", "CompanyDashBoard", new { id = "All" }, null)</li>
                        <li id="historyli">@Html.ActionLink("Library", "HistoryAction", "CompanyDashBoard",new {id="All"},null )</li>
                        <li id="accountprofile">@Html.ActionLink("My Profile", "Accountprofile", "CompanyDashBoard")</li>
                        <li id="inviteli"><a href="#" id="invite">Invites</a></li>
                        <li id="reportingli"><a href="#" id="reporting">Reporting</a></li>
                        <li id="incommli">@Html.ActionLink("Incoming", "Incomming", "CompanyDashBoard", new { id = "All" }, null)</li>*@

                                    @* @if (((ViewBag.Permission as IEnumerable<DecisionPointBAL.Implementation.Response.RoleResponse>).First().permissionName).Equals("Admin"))
                        {
                             <li id="commli"><a href="#" id="review">Communication</a></li>
                        <li id="administrationli"><a href="#" id="administration">Administration</a></li>
                        }
                        else if (((ViewBag.Permission as IEnumerable<DecisionPointBAL.Implementation.Response.RoleResponse>).First().permissionName).Equals("Compliance Manager"))
                        {
                            <li id="commli"><a href="#" id="review">Communication</a></li>
                        }
                        else if (((ViewBag.Permission as IEnumerable<DecisionPointBAL.Implementation.Response.RoleResponse>).First().permissionName).Equals("Business Manager"))
                        {
                             <li id="administrationli"><a href="#" id="administration">Administration</a></li>
                        }*@
                                </ul>



                                <!--Review-end-->


                                <!--administrator-->
                                <div class="r-default-drop administration" id="administration-base" style="left: 118px !important; top: 42px !important">
                                    <div class="r-default-inner">

                                        <h3>Organisation</h3>
                                        <ul>
                                            <li><a href="#">@Html.ActionLink("Add Staff", "InviteStaff", "CompanyDashboard")</a></li>
                                            <li><a href="#">@Html.ActionLink("Bulk Staff Upload", "InviteStaffBulk", "CompanyDashBoard")</a></li>
                                            <li><a href="#">@Html.ActionLink("Manage Staff", "InternalStaff", "CompanyDashBoard", new { id = 0 }, null)</a></li>
                                        </ul>

                                    </div>

                                    <div class="r-default-inner">
                                        <h3>Vendor/Client</h3>
                                        <ul>
                                            <li><a href="#">@Html.ActionLink("Add Vendor/Client", "InviteVendorManual", "CompanyDashboard")</a></li>
                                            <li><a href="#">@Html.ActionLink("Bulk Vendor/Client Upload", "InviteVendorBulk", "CompanyDashBoard")</a></li>
                                            <li><a href="#">@Html.ActionLink("Manage Vendors", "Vendors", "CompanyDashboard", new { id = 1 }, null)</a></li>
                                            <li><a href="#">@Html.ActionLink("Manage Clients", "Client", "CompanyDashboard", new { id = 1 }, null)</a></li>

                                        </ul>
                                    </div>
                                    @*  <div class="r-default-inner big-inner-div">
                            <h3>Client</h3>
                            <ul>
                                <li><a href="#">@Html.ActionLink("Add Clients", "ViewClient", "CompanyDashboard")</a></li>
                                <li><a href="#">@Html.ActionLink("Manage Clients", "Client", "CompanyDashboard", new { id = 1 }, null)</a></li>
                              </ul>
                        </div>*@
                                    <div class="r-default-inner big-inner-div">
                                        <h3>Default Settings</h3>
                                        <ul>
                                            <li><a href="#">@Html.ActionLink("Manage Staff Titles", "ViewTitle", "CompanyDashboard")</a></li>
                                            <li><a href="#">@Html.ActionLink("Manage Services Provided", "ViewService", "CompanyDashboard")</a></li>
                                            <li><a href="#">@Html.ActionLink("Manage References", "ViewReference", "CompanyDashboard")</a></li>
                                        </ul>
                                    </div>

                                </div>

                                <!--administrator-end-->




                            </div>


                        </div>
                        @*confiramtion box Popup*@
                        <div class="confirmationdivmain"></div>
                        <div class="confirmationdivinner">
                            <div style="background-clip: padding-box; background-color: #FFFFFF; height: 87px; padding: 20px; border: 1px solid rgba(0, 0, 0, 0.3); border-radius: 6px 6px 6px 6px; box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3); outline: 0 none;">
                                <div id="divmsg" style="font-size: 16px; padding-bottom: 10px;">Are you sure you want to move this record in archive? </div>

                                <div style="float: left; width: 50px; padding-top: 25px;">
                                    <input type="button" id="btnok" onclick="DeleteDoc()" class="btn btn-primary" value="Ok" />
                                    <input type="hidden" id="msgdocid" /><input type="hidden" id="type" />
                                </div>
                                <div id="btnokyes" style="width: 50px; padding-top: 25px; display: none;">
                                    <input type="button" class="btn btn-primary" value="Ok" />
                                </div>
                                <div style="float: left; width: 70px; padding-top: 25px;">
                                    <input type="button" class="btn btn-primary" id="btncancel" onclick="CancelDoc()" value="Cancel" />
                                </div>
                                <div style="clear: both;"></div>
                            </div>
                        </div>
                        @*Reactive box Popup*@
                        <div class="profiletrans" id="reactiveouter"></div>
                        <div class="popup" id="reactiveinner">
                            <div style="background-clip: padding-box; background-color: #FFFFFF; height: 87px; padding: 20px; border: 1px solid rgba(0, 0, 0, 0.3); border-radius: 6px 6px 6px 6px; box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3); outline: 0 none;">
                                <div style="font-size: 16px; padding-bottom: 10px;">Are you sure you want to move this record in My communcation? </div>

                                <div style="float: left; width: 50px; padding-top: 25px;">
                                    <input type="button" id="btnokreactive" onclick="Reactivedoc()" class="btn btn-primary" value="Ok" />

                                </div>
                                <div style="float: left; width: 70px; padding-top: 25px;">
                                    <input type="button" class="btn btn-primary" onclick="CancelreactiveDoc()" id="btnreactivecancel" value="Cancel" />
                                </div>
                                <div style="clear: both;"></div>
                            </div>
                        </div>
                        <div class="profiletrans" id="CompProfileouter"></div>
                        @*Company profile Popup*@
                        <div class="popup" id="CompProfilepopup" style="left: 25%; top: 25%;">
                            <div class="profile-popup" style="display: block;">
                                <div class="tittle-MessageBox">
                                    <span>Contact</span><a href="#">
                                        <img id="btncloseprofile" src="~/Content/images/Close-Icon-mail.png" onclick="CloseProfile()" width="19" height="19" alt="" border="0" /></a>
                                </div>
                                <div class="MessageSection-Box">
                                    <div class="To-Section">
                                        <input type="hidden" id="companyprofileUserId" hidden="hidden" />
                                    </div>
                                    <div style="float: left;">
                                        <div id="tblcomprofile1">
                                        </div>
                                    </div>
                                    <div style="float: right;">
                                        <b>Services</b>
                                        <div id="tblrole" style="padding-right: 103px; overflow-y: auto; height: 135px;">
                                        </div>

                                    </div>


                                </div>

                            </div>

                        </div>
                        <div id='content'>
                            <div class='container'>
                                <div class='content-box'>
                                    <section class="content-wrapper main-content clear-fix">
                                        @RenderBody()
                                    </section>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id='footer'>
            <div class='container'>
                <div class='row'>
                    <div class='span6'>
                    </div>
                    <div class='span6'>
                        <div class='text-right'>
                            Copyright 2014 &sdot; All rights reserved
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

<script type="text/javascript">
    //show dlete confirmation div
    function showconfirmationdiv(msgId, type) {
        $('#type').val(type);
        $('#msgdocid').val(msgId);
        $('.confirmationdivinner').fadeIn('slow');
        $('.confirmationdivmain').fadeIn('slow');
    }
    //Delete messges
    //  $("#btnok").click(function () {
    function DeleteDoc() {
        var type = $('#type').val();

        var docId = parseInt($('#msgdocid').val());
        $.ajax({
            url: '../RemoveDocument',
            data: { 'docId': docId },
            contentType: 'application/html; charset=utf-8',
            type: 'GET',
            dataType: 'html',
            success: function (data) {
                if (data == 1) {
                    $('#divmsg').html("Record moved to Archive");
                    $('#btnokyes').css("display", "block");
                    $('#btnok').css("display", "none");
                    $('#btncancel').css("display", "none");

                }
                else if (data == 0) {
                    $('.confirmationdivinner').fadeOut('slow');
                    $('.confirmationdivmain').fadeOut('slow');
                }
            },
            error: function () {
            },
            async: false,

        });
    }
    $('#btnokyes').click(function () {
        $('.confirmationdivinner').fadeOut('slow');
        $('.confirmationdivmain').fadeOut('slow');
        window.location.reload();
    });
    //  });
    //Cancel Delete messges
    // $("#btncancel").click(function () {
    function CancelDoc() {
        $('.confirmationdivinner').fadeOut('slow');
        $('.confirmationdivmain').fadeOut('slow');
    }
    // });
    //Close contact popup
    // $("#btncloseprofile").click(function () {
    function CloseProfile() {
        $('#CompProfileouter').fadeOut('slow');
        $('#CompProfilepopup').fadeOut('slow');
    }
    // });

    ////Documents tab
    //function document()
    //{

    //    $.ajax({
    //        url: 'DocumentAction',
    //        contentType: 'application/html; charset=utf-8',
    //        type: 'GET',
    //        dataType: 'html',
    //        data: { id: 'All' },
    //        success: function (result) {
    //          $('#fullcontent').html(result);

    //        },
    //        error: function () {

    //        },
    //        async: false,
    //    });
    //}
    //serach in history section
    function Go() {
        var url = '@Url.Action("../CompanyDashBoard/HistoryAction")';
            $.get(url, { id: $('#txtserach').val() }, function (result) {

                $('#history').html($(result).find('#history').html().trim());
                $("#btnviewall").css("visibility", "visible")
                $('#messagedoccourseli').removeClass("active");
                $('#historyli').addClass("active");
                $('#Accountprofileli').removeClass("active");
            });

        }
        //View all histroy data
        // $("#btnviewall").click(function () {
        function viewall() {

            var url = '@Url.Action("../CompanyDashBoard/HistoryAction")';
            $.get(url, { id: '' }, function (result) {
                $('#history').html($(result).find('#history').html().trim());
                $("#btnviewall").css("visibility", "hidden")
                $('#messagedoccourseli').removeClass("active");
                $('#historyli').addClass("active");
                $('#Accountprofileli').removeClass("active");
            });

        }
        //Filteration in webgrid using in drop down 
        function filter(filterOn, filtervalue, filteronDD) {
            if (filterOn == "document") {
                $.ajax({
                    type: 'GET',
                    datatype: 'json',
                    url: '../CompanyDashBoard',
                    data: { 'id': filtervalue },
                    success: function (result) {
                        // result = $(result).has('#documents').remove();
                        $('#documents').html($(result).find('#documents').html().trim());

                        if (filteronDD == "0") {

                            if (filtervalue == "All") {
                                $("#docdd").css({ "background-color": "#0044CC" });
                                $("#docdd").css({ "background-image": "linear-gradient(to bottom, #0088CC, #0044CC)" });
                                filtervalue = "Type";
                            }
                            else {
                                $("#docdd").css({ "background-color": "#0044CC !important" });
                                $("#docdd").css({ "background-image": "linear-gradient(to bottom, #0044CC, #0044CC)" });
                            }
                            $('#doctypedd').html(filtervalue);
                        }
                    }, async: true,
                    error: function (result) {
                    }

                });

            }
            if (filterOn == "incoming") {
                $.ajax({
                    type: 'GET',
                    datatype: 'json',
                    url: '../Incomming',
                    data: { 'id': filtervalue },
                    success: function (result) {
                        // result = $(result).has('#documents').remove();
                        $('#documents').html($(result).find('#documents').html().trim());

                        if (filteronDD == "0") {

                            if (filtervalue == "All") {
                                $("#docdd").css({ "background-color": "#0044CC" });
                                $("#docdd").css({ "background-image": "linear-gradient(to bottom, #0088CC, #0044CC)" });
                                filtervalue = "Type";
                            }
                            else {
                                $("#docdd").css({ "background-color": "#0044CC !important" });
                                $("#docdd").css({ "background-image": "linear-gradient(to bottom, #0044CC, #0044CC)" });
                            }
                            $('#doctypedd').html(filtervalue);
                        }
                    }, async: true,
                    error: function (result) {
                    }

                });

            }
            //History/Library
            if (filterOn == "history") {
                var url = '@Url.Action("../CompanyDashBoard/HistoryAction")';
                $.get(url, { id: filtervalue }, function (result) {
                    $('#history').html($(result).find('#history').html().trim());
                    if (filteronDD == "0") {
                        if (filtervalue == "All") {
                            $("#hisdd0").css({ "background-color": "#0044CC" });
                            $("#hisdd0").css({ "background-image": "linear-gradient(to bottom, #0088CC, #0044CC)" });
                            filtervalue = "Status";

                        }
                        else {
                            $("#hisdd0").css({ "background-color": "#0044CC" });
                            $("#hisdd0").css({ "background-image": "linear-gradient(to bottom, #0044CC, #0044CC)" });
                        }
                        $('#hisstatusdd').html(filtervalue);

                    }
                    if (filteronDD == "1") {
                        if (filtervalue == "All") {
                            $("#hisdd1").css({ "background-color": "#0044CC" });
                            $("#hisdd1").css({ "background-image": "linear-gradient(to bottom, #0088CC, #0044CC)" });
                            filtervalue = "Type";
                        }

                        else {
                            $("#hisdd1").css({ "background-color": "#0044CC" });
                            $("#hisdd1").css({ "background-image": "linear-gradient(to bottom, #0044CC, #0044CC)" });
                        }
                        $('#doctypedd').html(filtervalue);
                    }
                    if (filteronDD == "2") {
                        if (filtervalue == "All") {
                            $("#hisdd2").css({ "background-color": "#0044CC" });
                            $("#hisdd2").css({ "background-image": "linear-gradient(to bottom, #0088CC, #0044CC)" });
                            filtervalue = "Pass/Retry";
                        }
                        else {
                            $("#hisdd2").css({ "background-color": "#0044CC" });
                            $("#hisdd2").css({ "background-image": "linear-gradient(to bottom, #0044CC, #0044CC)" });
                        }
                        $('#hispassretrydd').html(filtervalue);

                    }
                    if (filteronDD == "3") {
                        if (filtervalue == "All") {
                            $("#hisdd3").css({ "background-color": "#0044CC" });
                            $("#hisdd3").css({ "background-image": "linear-gradient(to bottom, #0088CC, #0044CC)" });
                            filtervalue = "Condition";
                        }
                        else {
                            $("#hisdd3").css({ "background-color": "#0044CC" });
                            $("#hisdd3").css({ "background-image": "linear-gradient(to bottom, #0044CC, #0044CC)" });
                        }
                        $('#hisaccdd').html(filtervalue);
                    }

                });

            }
        }
        //From Link
        function showCompanyprofile(UserId) {
            $('#CompProfileouter').fadeIn('slow');
            $('#CompProfilepopup').fadeIn('slow');
            $('#companyprofileUserId').val(UserId);
            var $tbl = $('#tblcomprofile1');
            $.ajax({
                type: 'GET',
                datatype: 'json',
                url: '../ViewCompanyprofile',
                data: { 'UserId': UserId },
                success: function (data) {
                    data = $.parseJSON(data);
                    //code to bind table
                    var rows = ' ';

                    //$.each(data, function (i, item) {

                    rows += '<div style="line-height: 32px;">  <b>Name :</b> <span style="padding-left:71px;">'
                           + data.fName + ',' + data.mName + data.lName + '</span> </div> <div style="line-height: 32px;">  <b>Comapny Name:</b> ' +
                           '<span style="padding-left:10px;">' + data.companyName +
                           '</span></div>  <div style="line-height: 32px;">  <b>Office Phone :</b> <span style="padding-left:21px;">'
                           + data.officePhone + '</span></div> <div style="line-height: 32px;"> <b>Cell Phone :</b> <span style="padding-left:35px;"> ' + data.directPhone + '</span></div>' +
                    '<div style="line-height: 32px;"> <b>Email :</b><span style="padding-left:79px;">' + data.emailId + '</span></div> ';

                    //});
                    rows = rows + ' ';
                    $tbl.empty();//make the table empty if already filled
                    $tbl.append(rows);//append the new/updated rows in the table      
                    getuserroles(UserId);

                }, async: true,
                error: function (data) {
                }
            });

        }
        //Get User Roles
        function getuserroles(UserId) {

            var $tbl = $('#tblrole');
            $.ajax({
                type: 'GET',
                datatype: 'json',
                url: '../../UserDashBoard/ViewUserServices',
                data: { 'UserId': UserId },
                success: function (data) {
                    data = $.parseJSON(data);
                    //code to bind table
                    var rows = ' ';
                    $.each(data, function (i, item) {
                        rows += '<div><ul style="list-style:none;"><li>' + item + '</li></ul></div>';

                    });

                    rows = rows + ' ';
                    $tbl.empty();//make the table empty if already filled
                    $tbl.append(rows);//append the new/updated rows in the table      
                }, async: true,
                error: function (data) {
                }
            });
        }

</script>

</html>

